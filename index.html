<script>
    let profitChart = null;

    async function loadData() {
        try {
            // 1. POBIERZ GOTOWE STATYSTYKI Z PYTHONA
            const sRes = await fetch('stats.json?v=' + Date.now());
            const s = await sRes.json();

            // 2. WSTAW DANE DO KAFELKÓW
            document.getElementById('total-profit').innerText = s.total_profit.toLocaleString('pl-PL', {minimumFractionDigits: 2}) + ' PLN';
            document.getElementById('today-profit').innerText = (s.profit_24h >= 0 ? '+' : '') + s.profit_24h.toFixed(2) + ' PLN';
            document.getElementById('today-profit').className = `text-lg font-black ${s.profit_24h >= 0 ? 'text-green-500' : 'text-red-500'}`;
            document.getElementById('total-staked').innerText = s.turnover.toLocaleString('pl-PL') + ' PLN';
            document.getElementById('yield-val').innerText = s.yield + '%';
            document.getElementById('total-bets').innerText = `${s.total_bets} / ${s.win_rate}%`;
            document.getElementById('last-update').innerText = 'Sync: ' + s.last_update;

            // 3. POBIERZ HISTORIĘ DO WYKRESU I LISTY
            const hRes = await fetch('history.json?v=' + Date.now());
            const history = await hRes.json();
            
            // Logika wykresu i FLAG_MAP pozostaje taka sama jak w Twoim kodzie...
            renderHistoryAndChart(history); 

        } catch (e) { console.error("Błąd synchronizacji:", e); }
    }

    function renderHistoryAndChart(history) {
        // Tutaj wklej resztę swojej logiki generowania 'history-groups' i 'updateChart'
        // Skróciłem to, żeby zmieścić się w odpowiedzi, ale Twoja funkcja była OK.
    }

    loadData();
    setInterval(loadData, 300000); // Odświeżaj co 5 min
</script>
